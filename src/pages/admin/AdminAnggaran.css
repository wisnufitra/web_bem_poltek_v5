/*
|--------------------------------------------------------------------------
| AdminAnggaran.css
|--------------------------------------------------------------------------
| Styling untuk komponen AdminAnggaran.jsx
| Disederhanakan dan dibuat responsive untuk performa terbaik.
*/

/* === BASE & LAYOUT === */
.admin-page{font-family:'Inter',sans-serif;background-color:#f8fafc;min-height:100vh;padding:24px}
.page-header{margin-bottom:24px}
.page-title{color:#1e293b;font-size:1.75rem;font-weight:700;margin:0}
.page-subtitle{color:#64748b;font-size:1rem;margin:4px 0 0}
.card{background-color:#fff;padding:24px;border-radius:12px;border:1px solid #e2e8f0;box-shadow:0 4px 6px -1px rgba(0,0,0,.05);margin-bottom:24px}
.card-title{margin:0;color:#1e293b;font-size:1.25rem;font-weight:600; display: flex; align-items: center;}

/* --- FORM ELEMENTS --- */
.input{display:block;width:100%;padding:10px 12px;border-radius:8px;border:1px solid #cbd5e0;font-size:1rem;background-color:#fff;transition:border-color .2s}
.input:focus{border-color:#3b82f6;outline:0;box-shadow:0 0 0 2px rgba(59,130,246,.2)}
.label{display:block;margin-bottom:8px;font-size:.9rem;color:#334155;font-weight:600}
.label.sub-label{font-size:.8rem;margin-bottom:6px;color:#475569}
.form-grid-2-col{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.input-with-icon{
    position:relative;
    display:flex;
    align-items:center
}
.input-with-icon .input{
    /* Pastikan padding kiri cukup untuk ikon */
    padding-left:40px;
    /* Tambahkan border-radius yang sesuai jika belum ada */
    border-radius: 8px; 
}
/* Tambahan: Pastikan label dan input punya jarak yang bagus di grid */
.form-group{
    /* Tambahan agar input di bawah label terpisah */
    margin-bottom: 15px; 
}

.modal-form {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Memungkinkan form membesar ke seluruh ruang yang tersedia */
    overflow: hidden; /* Mencegah overflow container form itu sendiri */
}

/* Modal Body spacing */
.modal-body{
    padding:24px;
    /* >>> PERBAIKAN KRITIS UNTUK SCROLLING <<< */
    overflow-y:auto; /* Hanya body yang bisa di-scroll secara vertikal */
    flex-grow: 1; /* Memungkinkan body mengambil semua ruang yang tersedia */
    /* ------------------------------------- */
    display:flex;
    flex-direction:column;
    gap:24px; 
}

/* Status & Keterkaitan Section (Memastikan label tgl. kegiatan sejajar) */
.form-grid-2-col{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:20px
}
.form-section-title{margin-top:0;color:#1e293b;border-bottom:1px solid #e2e8f0;padding-bottom:12px;margin-bottom:16px;font-size:1.1rem}

/* --- BUTTONS --- */
.button{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:600;font-size:.9rem;text-decoration:none;border:1px solid transparent;transition:all .2s}
.button-primary{background-color:#2563eb;color:#fff}
.button-primary:hover{background-color:#1d4ed8}
.button-secondary{background-color:#f1f5f9;color:#475569;border-color:#e2e8f0}
.button-secondary:hover{background-color:#e2e8f0}
.button-success{background-color:#16a34a;color:#fff}
.button-success:hover{background-color:#15803d}
.button-danger{background-color:#dc2626;color:#fff}
.button-danger:hover{background-color:#b91c1c}
.button-icon{padding:8px;border-radius:50%;border:none;background-color:transparent;color:#64748b;cursor:pointer}
.button-icon:hover{background-color:#f1f5f9}
.button-icon.danger:hover{background-color:#fee2e2;color:#dc2626}
.button-icon-small{padding:4px;border-radius:50%;border:none;background-color:transparent;color:#64748b;cursor:pointer;line-height:1}
.button-icon-small.danger:hover{background-color:#fee2e2;color:#dc2626}

/* --- MODAL & TOAST --- */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(15,23,42,.6);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px}
.modal-content{
    background-color:#fff;
    border-radius:12px;
    width:100%;
    /* Gunakan max-height yang lebih jelas, misalnya 95vh */
    max-height:95vh; 
    /* PENTING: Atur display flex column agar body, header, dan footer tertata */
    display:flex; 
    flex-direction:column;
    overflow:hidden; /* Biarkan konten modal utama yang menangani scrolling */
    box-shadow:0 10px 25px rgba(0,0,0,.1)
}
.modal-content.large{
    max-width:800px;
    /* Tambahkan flex-grow: 1 di modal large agar memanjang secara vertikal jika dibutuhkan */
    flex-grow: 1; 
}
.modal-header{padding:20px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e2e8f0;flex-shrink:0}
.modal-content.small-modal{max-width:400px;text-align:center;padding:24px;overflow:hidden}
.modal-actions{display:flex;justify-content:flex-end;gap:12px;flex-shrink:0;border-top:1px solid #e2e8f0;padding:16px 24px;background-color:#f8fafc}

/* --- FILTER & LIST HEADER --- */
.list-header{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:16px;margin-bottom:16px}
/* NOTE: Styling .filter-controls lama ini memiliki padding/border-top yang akan di-override di .dropdown-row */

/* KODE BARU: Wrap tombol di header list */
.list-header-actions {
    display: flex;
    gap: 12px; /* Jarak antara tombol Export dan Tambah */
    align-items: center;
}

.filter-controls {
    display: flex;
    gap: 16px;
    /* Reset properti yang mengganggu */
    margin-top: 0; 
    padding-top: 0;
    border-top: none; 
}

.filter-controls.search-input-row {
    /* Menentukan margin secara spesifik untuk baris pencarian */
    display: flex;
    gap: 16px;
    
    /* Jarak dari Tombol Tambah Program (ke atas) */
    margin-top: 20px; 
    
    /* Jarak ke Dropdown Filter (ke bawah) */
    margin-bottom: 20px; 
    
    border-top: none; 
    padding-top: 0;
}

.filter-controls.search-input-row .input-with-icon {
    flex: 1; /* Pastikan input search mengambil seluruh ruang */
}

.filter-controls.dropdown-row {
    display: flex;
    gap: 16px;
    
    margin-top: 0; 
    /* Jarak ke Daftar Program di bawahnya */
    margin-bottom: 24px; 
    
    /* Tambahkan garis tipis di atas dropdown filter */
    padding-top: 20px; 
    border-top: 1px solid #e2e8f0; 
}

/* --- SUB-SECTION & RINCIAN (Modal) --- */
.sub-section{border:1px solid #e2e8f0;border-radius:12px;padding:20px;background-color:#f8fafc}
.sub-section-title{margin-top:0;color:#1e293b;border-bottom:1px solid #e2e8f0;padding-bottom:12px;margin-bottom:16px;font-size:1.1rem}
.rincian-list{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto;padding-right:8px;margin-bottom:16px}
.rincian-form{margin-top:16px;align-items:flex-end}
.rincian-total{text-align:right;margin-top:16px;font-size:1.1rem;padding-top:16px;border-top:1px solid #e2e8f0}
.rincian-total strong{color:#475569}
.rincian-total span{font-weight:700;color:#1e293b; padding-right: 12px;}
.rincian-item{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background-color:#fff;border-radius:8px;border:1px solid #e2e8f0;}
.rincian-detail-group{display:flex; align-items:baseline; gap:8px; flex-grow: 1; flex-shrink: 1; min-width: 0; max-width: 60%;}
.rincian-jumlah{font-weight:600; white-space:nowrap; text-align: right; margin-right: 12px; flex-shrink: 0; margin-left: auto;}
.rincian-desc{font-weight:600; color:#1e293b; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;}
.rincian-date{font-size:.85rem;color:#64748b}
.rincian-form .input {text-align: left; padding-right: 12px;}
.rincian-form .input-with-icon .input {padding-left: 40px;}

/* Mode Input Switcher */
.form-mode-switcher{display:flex;border:1px solid #cbd5e0;border-radius:8px;padding:4px;background-color:#f1f5f9; gap: 4px;}
.form-mode-switcher button{flex:1;padding:8px 12px;border:none;background-color:transparent;border-radius:6px;font-weight:500;color:#475569;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s}
.form-mode-switcher button.active{background-color:#fff;color:#1d4ed8;font-weight:600;box-shadow:0 2px 4px rgba(0,0,0,.05)}


/* --- SBM MODAL STYLING --- */
.sbm-table-container {overflow-x: auto;}
.sbm-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; min-width: 800px; }
.sbm-table th, .sbm-table td { border: 1px solid #e2e8f0; padding: 10px; text-align: left; }
.sbm-table th { background-color: #f1f5f9; font-weight: 600; color: #1e293b; }
.sbm-table td.text-right { text-align: right; font-weight: 600; }
.note { font-size: 0.85rem; color: #64748b; display: flex; align-items: center; }
.sbm-input-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 16px;
}
.sbm-action-flex-bottom {
    display: flex;
    gap: 16px;
    align-items: center; 
    padding-top: 8px;
}
.sbm-action-flex-bottom .button-primary { margin-top: 0; }


/* --- CHART AND DASHBOARD LAYOUT --- */
.chart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; 
    gap: 24px;
    margin-bottom: 24px;
}
.chart-card { min-height: 400px; display: flex; flex-direction: column; }
.chart-container-wrapper {
    flex-grow: 1;
    height: 350px; 
    position: relative; 
    margin-top: 20px;
    padding: 0 10px; 
}
.chart-card .card-title {
    margin-bottom: 0;
    padding-bottom: 8px;
    border-bottom: 1px dashed #e2e8f0;
    padding-left: 10px; 
    padding-right: 10px;
}
.bottom-list-container {
    margin-top: 20px;
    max-height: 350px; 
    overflow-y: auto;
}

/* KOREKSI: Styling untuk item bottom 5 (List) */
.item-rekap-stats-small {
    display: flex;
    flex-wrap: wrap; 
    gap: 16px;
    font-size: 0.9rem;
    text-align: right;
    margin-left: auto;
    flex-shrink: 0;
}
.item-rekap-stats-small > div {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    min-width: 90px;
}
.item-rekap-stats-small strong { white-space: nowrap; }
.list-item-condensed.small-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 18px;
    border-radius: 8px;
    font-size: 0.9rem;
    border: 1px solid #e2e8f0;
    background-color: #fff;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
.list-item-condensed.small-item .item-main-info { flex-grow: 1; max-width: 60%; }

/* --- STYLING DAFTAR UTAMA & REKAPITULASI --- */
.item-list{display:flex;flex-direction:column;gap:12px;margin-top:24px}
.list-item-condensed{display:grid;grid-template-columns:minmax(0,3fr) minmax(0,2fr) minmax(0,1.5fr) minmax(0,1fr) minmax(0,auto);align-items:center;gap:16px;padding:16px;background-color:#fff;border:1px solid #e2e8f0;border-radius:12px;transition:background-color .2s}
.list-item-condensed:hover{background-color:#f9fafb}
.item-main-info{min-width:0}
.item-main-info strong,.item-stats strong{display:block;color:#1e293b;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.item-main-info small{color:#64748b;font-size:.8rem;display:flex;align-items:center;gap:6px}
.item-stats{text-align:right}
.item-stats div{line-height:1.4}
.item-stats strong{display:block;color:#1e293b;font-weight:600; text-align: right; padding-right: 12px;}
.item-stats small{color:#64748b;font-size:.8rem}
.item-status,.item-progress{text-align:center}
.item-actions{display:flex;gap:4px;justify-content:flex-end}
.status-badge{padding:4px 10px;border-radius:9999px;font-size:.75rem;font-weight:600;text-transform:capitalize}
.status-badge-wrapper{display:inline-flex;align-items:center;gap:6px}
.status-selesai{background-color:#dcfce7;color:#166534}
.status-berjalan,.status-disetujui{background-color:#dbeafe;color:#1e40af}
.status-perencanaan{background-color:#f1f5f9;color:#475569}
.status-dibatalkan{background-color:#fee2e2;color:#991b1b}
.status-spj-masuk{background-color:#ede9fe;color:#5b21b6}
.progress-bar{width:100%;max-width:120px;margin:4px auto 0;background-color:#e2e8f0;border-radius:9999px;height:8px;overflow:hidden}
.progress-bar-fill{height:100%;background-color:#3b82f6;border-radius:9999px;transition:width .3s ease}

/* Item Rekap Individu */
.list-item-condensed.rekap-item {
    grid-template-columns: minmax(0,1.5fr) minmax(0,1fr) minmax(0,1fr) minmax(0,1fr) minmax(0,1fr);
    align-items: center; 
    gap: 16px;
    padding: 16px;
}
.list-item-condensed.rekap-item .item-main-info { grid-column: 1 / 2; }
.item-rekap-stats {
    grid-column: 2 / 6;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px; 
    max-width: none;
}
.item-rekap-stats > div { align-items: flex-end; }
.item-rekap-stats strong { text-align: right; }
.list-item-condensed.rekap-item .item-actions { display: none; }

/* GRAND TOTAL REKAPITULASI */
.grand-total-row {
    background-color: #eff6ff; 
    border: 2px solid #3b82f6; 
    font-weight: 700;
    margin-top: 20px; 
    padding: 20px 24px; 
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
    display: grid;
    /* GRID UTAMA: ORMAWA + 4 KOLOM ANGKA */
    grid-template-columns: minmax(0,1.2fr) repeat(4, minmax(0,1fr)); 
    align-items: center;
    gap: 20px; /* Jarak antara kolom ORMAWA dan Angka */
}

.grand-total-row .item-main-info {
    /* Kolom Kiri: Label Total Keseluruhan (Biarkan di grid kolom 1) */
    grid-column: 1 / 2;
    text-align: left; /* Pastikan teks rata kiri */
}

.grand-total-numbers {
    /* GRID KHUSUS ANGKA: Membentang dari kolom 2 hingga akhir */
    grid-column: 2 / 6; 
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 kolom untuk Diajukan, Disetujui, Terlaksana, Sisa */
    gap: 16px;
    width: 100%;
}

.grand-total-col { 
    /* Pastikan angka di setiap kolom rata kanan untuk sejajar dengan angka item */
    text-align: left; 
    padding-right: 12px; /* Sejajarkan dengan padding inner item list */
}

.grand-total-col strong {
    font-size: 1.1rem; 
    font-weight: 700;
    color: #1e293b;
    white-space: nowrap;
}
.text-danger { color: #dc2626; }
.text-success { color: #16a34a; }
.text-warning { color: #f97316; }

/* Pagination */
.pagination-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px; 
    margin-top: 24px;
    padding: 12px 20px; 
    border-top: 1px solid #e2e8f0; 
    background-color: #ffffff; 
    border-radius: 10px; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
    max-width: fit-content; 
    margin-left: auto; 
    margin-right: auto; 
}

/* 1. CONTAINER UNTUK TOMBOL ANGKA (page-numbers-group) */
.pagination-controls .page-numbers-group {
    display: flex;
    gap: 4px;
}

/* 2. STYLING TOMBOL ANGKA INDIVIDU */
.pagination-number {
    /* Gaya Dasar */
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid #cbd5e0;
    background-color: #fff;
    color: #475569;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.pagination-number:hover {
    background-color: #f1f5f9;
}

.pagination-number.active {
    background-color: #3b82f6; /* Warna biru primer */
    color: #fff;
    border-color: #3b82f6;
    cursor: default;
}


/* 3. STYLING TOMBOL SEBELUMNYA/BERIKUTNYA (button-secondary) */

.pagination-controls .button-secondary {
    padding: 8px 14px; 
    border-radius: 6px; 
    
    background-color: #f1f5f9;
    color: #475569;
    border: 1px solid #cbd5e0;
    font-weight: 500; 
    transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
    display: flex; 
    align-items: center;
    gap: 6px; 
    
    width: auto; 
    height: auto; 
    line-height: normal;
}

.pagination-controls .button-secondary:hover:not(:disabled) {
    background-color: #e2e8f0;
    border-color: #94a3b8;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}

.pagination-controls .button-secondary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: #f8fafc; 
    color: #94a3b8;
    border-color: #f1f5f9;
}

/* 4. MENGHAPUS / MENYEMBUNYIKAN PAGE INFO KARENA SUDAH DIGANTI TOMBOL ANGKA */
/* Jika Anda sudah menghapus elemen <span className="page-info"> di JSX, baris ini opsional. 
   Jika belum, sebaiknya sembunyikan. */
.pagination-controls .page-info { 
    display: none; 
}
.page-info { 
    display: none; 
}

/* Media query for smaller screens */
@media (max-width: 768px) {
    /* Umum */
    .admin-page { padding: 16px; }
    .page-title { font-size: 1.5rem; }
    .page-subtitle { font-size: 0.9rem; }
    
    /* Chart Grid: Dari 2 kolom menjadi 1 kolom penuh */
    .chart-grid { grid-template-columns: 1fr; }
    .chart-card { min-height: 350px; }
    .chart-container-wrapper { height: 280px; }
    .bottom-list-container { max-height: 250px; }

    /* List Utama Anggaran: Mengubah grid menjadi layout yang lebih ringkas */
    .list-item-condensed { display: flex; flex-direction: column; align-items: flex-start; padding: 12px; gap: 8px; }
    .item-main-info { order: 1; width: 100%; }
    .item-stats { order: 3; width: 100%; display: flex; justify-content: space-between; text-align: left; padding-right: 0; }
    .item-stats div { text-align: left; }
    .item-stats strong { text-align: left; padding-right: 0; font-size: 1rem; }
    .item-progress { order: 4; width: 100%; }
    .item-status { order: 2; width: 100%; justify-content: flex-start; margin-bottom: 8px; }
    .item-actions { order: 5; width: 100%; justify-content: flex-start; margin-top: 8px; }
    
    /* Rekapitulasi & Grand Total */
    .list-item-condensed.rekap-item,
    .list-item-condensed.grand-total-row {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 12px;
        gap: 12px;
        grid-template-columns: none; 
    }
    .item-rekap-stats {
        width: 100%;
        grid-template-columns: 1fr 1fr;
        max-width: none;
        margin-top: 0;
        grid-column: auto;
    }
    .item-rekap-stats > div { align-items: flex-start; }
    .item-rekap-stats strong { text-align: left; }

    .grand-total-numbers {
        grid-column: auto;
        width: 100%;
        grid-template-columns: 1fr 1fr;
    }
    .grand-total-col { text-align: left; }
    .filter-controls { flex-direction: column; }

    .filter-controls.search-input-row,
    .filter-controls.dropdown-row { 
        flex-direction: column; 
        gap: 12px;
    }
    .filter-controls.dropdown-row {
        margin-bottom: 15px;
    }
}